
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Pulse iD">
      
      
        <link rel="canonical" href="http://www.pulseid.com/integration/android_studio/index.html">
      
      
        <meta name="author" content="Pulse iD">
      
      
        <link rel="shortcut icon" href="../../favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.2, mkdocs-material-1.5.0">
    
    
      
        <title>Android Studio - Android SDK 2.4.1</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-d848f886dc.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-66fa0d9bba.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../styles/extra.css">
    
      <link rel="stylesheet" href="../../styles/xcode.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="cyan" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../../overview/android_studio/index.html" title="Android SDK 2.4.1" class="md-logo md-header-nav__button">
            <img src="../../logo.png" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Integration
                </span>
              
            
            Android Studio
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/danielBC-KIM/danielBC-KIM.git" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../logo.png">
      </i>
    
    Android SDK 2.4.1
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/danielBC-KIM/danielBC-KIM.git" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      overview
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/android_studio/index.html" title="Android Studio" class="md-nav__link">
      Android Studio
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/android_studio/index.html" title="Android Studio" class="md-nav__link">
      Android Studio
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Android Studio
      </label>
    
    <a href="index.html" title="Android Studio" class="md-nav__link md-nav__link--active">
      Android Studio
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#android-lollipop-and-above" title="Android Lollipop and above" class="md-nav__link">
    Android Lollipop and above
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-marshmallow-and-above" title="Android Marshmallow and above" class="md-nav__link">
    Android Marshmallow and above
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Advanced integration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Advanced integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced_integration/android_studio/index.html" title="Android Studio" class="md-nav__link">
      Android Studio
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#android-lollipop-and-above" title="Android Lollipop and above" class="md-nav__link">
    Android Lollipop and above
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-marshmallow-and-above" title="Android Marshmallow and above" class="md-nav__link">
    Android Marshmallow and above
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/danielBC-KIM/danielBC-KIM.git/edit/master/docs/integration/android_studio.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                <h1 id="integration-android-studio">Integration - Android Studio</h1>
<p><strong>Initialise Pulse library</strong></p>
<p>Initialise Pulse library in the main Application class of your project. For e.g.:</p>
<pre><code class="java"> Private PulseSDK mPulseSDK;
 mPulseSDK = new PulseSDK(this);
</code></pre>

<p>Please refer to the demo app’s DemoAppApplication.java file to review the examples in this document.</p>
<hr />
<p><strong>Initialise SDK with your app key</strong></p>
<p>Initialise the SDK using setConfig method with your app key:</p>
<pre><code class="java">mPulseSDK.setConfig(“key”,“your-app-key-here”);
</code></pre>

<hr />
<p><strong>Set the package name</strong></p>
<p>If the package name of Application does not match the package name in AndroidManifest.xml, set the package name to ensure app references can be correctly read by the SDK:</p>
<pre><code class="java">mPulseSDK.setPackageName(mPackageName);
</code></pre>

<hr />
<p><strong>Set the SDK mode</strong></p>
<p>Pulse runs a service to ensure that interactions can be triggered even when the app is in the background or inactive (not in memory). Based on project requirements, Pulse service can be started in different modes to selectively trigger interactions:</p>
<ul>
<li>To interact in all modes (foreground, background and inactive):</li>
</ul>
<pre><code class="java">   mPulseSDK.startService(true, true, true);
</code></pre>

<ul>
<li>To interact in foreground and background mode only:</li>
</ul>
<pre><code class="java">   mPulseSDK.startService(true, true, false);
</code></pre>

<ul>
<li>To interact in foreground only:</li>
</ul>
<pre><code class="java">   mPulseSDK.startService(true, false, false);
</code></pre>

<ul>
<li>To interact in background only:</li>
</ul>
<pre><code class="java">   mPulseSDK.startService(false, true, false);
</code></pre>

<p>By default, the SDK would use ANDROID_ID and hardware SERIAL number to create a session identifier for the app install:
<a href="https://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID">https://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID</a>
<a href="https://developer.android.com/reference/android/os/Build.html#SERIAL">https://developer.android.com/reference/android/os/Build.html#SERIAL</a></p>
<p>If you want to use another identifier, use setSessionID method before starting the service:</p>
<pre><code class="java">   mPulseSDK.setSessionID(&quot;4083EE6AF29F4DEDBE5729EB85DD16C8&quot;);
   mPulseSDK.startService(true, true, true);
</code></pre>

<p>Please refer to the demo app’s DemoAppApplication.java file to review these Pulse service configurations.</p>
<hr />
<p><strong>Stop and restart the SDK</strong></p>
<p>Pulse interactions can be “forced” stopped, if required. This feature is used to implement custom user controls within the app to allow user’s to opt-in/out of using Pulse powered features.
Note that Pulse services operate asynchronously, thus depending on the device it will take a few seconds to shut it down or restart.</p>
<ul>
<li>To stop the PulseSDK Service:</li>
</ul>
<pre><code class="java">   PulseSDK.stopService(mApplication);
</code></pre>

<ul>
<li>After stopping, to restart PulseSDK Service:</li>
</ul>
<pre><code class="java">   PulseSDK.resetService(mApplication);
   PulseSDK mPulseSDK = new PulseSDK (mApplication);
   PulseSDK.startService(true, true, true);
</code></pre>

<hr />
<p><strong>In-app interactions within a web view</strong></p>
<p>When the app is open (active), in-app beacon/geofence interactions are rendered within a web view. This feature is only available when setActivityStatus method is called within the app’s activity lifecycle functions.</p>
<p>For e.g.:</p>
<pre><code class="java">   import com.pulse.sdk.global.PulseSDK;

   @Override
   protected void onResume() {
     super.onResume();
     PulseSDK.setActivityStatus(this,false,false);
   }

   @Override
   protected void onPause() {
     PulseSDK.setActivityStatus(this,true,false);
     super.onPause();
   }

   @Override
   protected void onDestroy() {
     PulseSDK.setActivityStatus(this,false,true);
     super.onDestroy();
   }
</code></pre>

<p>Please refer to the demo app’s DemoActivity.java file.</p>
<h2 id="android-lollipop-and-above">Android Lollipop and above</h2>
<hr />
<p><strong>Notification icon</strong></p>
<p>Ensure the name of notification icon file (PNG) is “ic_notification_above_lollipop.png” for target device that has API 21 (Lollipop) and above. This app icon will appear in notifications. Refer to the Android guide for guidance on notification icon design:
<a href="https://developer.android.com/design/patterns/notifications.html">https://developer.android.com/design/patterns/notifications.html</a></p>
<ul>
<li>
<p>Please refer to the demo app’s res folder for an example. </p>
<p><img alt="Quickstart Capabilities" src="../images/ic_notification_above_lollipop.png" />  </p>
</li>
<li>
<p>You may also wish to customize the background color of the notification icon by modifying colors.xml file in pulse-sdk-library project.</p>
<p><img alt="Quickstart Capabilities" src="../images/colors.png" /> </p>
<p>For e.g.</p>
<p><code>java
 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 &lt;resources&gt;
 &lt;color name="notification_icon_bg_color_above_lollipop"&gt;#ffff4b2f&lt;/color&gt;
 &lt;/resources&gt;</code></p>
</li>
</ul>
<h2 id="android-marshmallow-and-above">Android Marshmallow and above</h2>
<hr />
<p><strong>New permission standard</strong></p>
<p>If app’s target build is API 23 or higher, then the developer needs to account for new permission standard introduced in Android 6.0:
<a href="https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous">https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous</a></p>
<ul>
<li>
<p>Pulse SDK requires at least the Location permissions to operate its Geofence and beacon features. Thus, it is recommended that the app ask for the permission when it is opened for the first time.</p>
<p><img alt="Quickstart Capabilities" src="../images/location_permission.png" /> </p>
</li>
<li>
<p>As an example, below is a suggested approach to request the location permission in the launcher activity of the app. Refer to the demo app’s DemoActivity.java file to see this example:</p>
</li>
</ul>
<pre><code class="java">     //remove Toast messages in production
     @Override
     protected void onCreate(Bundle savedInstanceState) {
       if (Build.VERSION.SDK_INT &gt;= 23) {
         PulsePermissions mPulsePermissions = new
         PulsePermissions (this.getApplicationContext());
         requestLocationPermission(mPulsePermissions.getPemissionStatusLocation());
       }
     }

     private void requestLocationPermission(int mLocation) {
        if (Build.VERSION.SDK_INT &gt;= 23) {
           if ((mLocation != PackageManager.PERMISSION_GRANTED)) {
             boolean bLocation = ActivityCompat.shouldShowRequestPermissionRationale(this,Manifest.permission.ACCESS_FINE_LOCATION);
               if (bLocation) {
                  Toast.makeText(this, &quot;User denied Location Permission... Wait until user has changed Permission&quot;, Toast.LENGTH_LONG).show();
               }else {
                  //Show location permission prompt to user
                  ActivityCompat.requestPermissions((Activity) this,
                  new String[]{Manifest.permission.ACCESS_FINE_LOCATION},
                  REQUEST_PERMISSION_LOCATION);
               }
           } else {
              if((mLocation != PackageManager.PERMISSION_GRANTED)) {
                  boolean bLocation = ActivityCompat.shouldShowRequestPermissionRationale(this,Manifest.permission.ACCESS_FINE_LOCATION);
                 if (bLocation) {
                   Toast.makeText(this, &quot;User disabled Location Permissions... Wait until user changes Permissions&quot;, Toast.LENGTH_LONG).show();
                 }
              }
           }
        }
     }
</code></pre>

<hr />
<p><strong>Clean the project and build with ProGuard</strong></p>
<p>Clean the project (Project &gt; Clean) and then Build(Project &gt; Build Project). 
Please refer to both proguard-pulse.txt and project.properties files in Pulse demo app to build with ProGuard. </p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../installation/android_studio/index.html" title="Android Studio" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Android Studio
              </span>
            </div>
          </a>
        
        
          <a href="../../advanced_integration/android_studio/index.html" title="Android Studio" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Android Studio
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright (c) Pulse iD
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-c6f9af8d0c.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
        <script src="../../highlight.pack.js"></script>
      
    
    
      
    
  </body>
</html>